{% extends "main/app_base.html" %}
{% load i18n %}
{% block title %}{{ supplier.name }} – Stocker{% endblock %}
{% block content %}
<header class="flex items-center justify-between">
  <div class="flex items-center gap-3">
    {% if supplier.logo %}
      <img src="{{ supplier.logo.url }}" alt="{{ supplier.name }} logo" class="h-10 w-10 rounded object-contain border">
    {% endif %}
    <div>
      <h1 class="text-xl font-semibold">{{ supplier.name }}</h1>
      <p class="text-sm text-gray-500">
        {{ supplier.email|default:"" }}{% if supplier.phone %} • {{ supplier.phone }}{% endif %}
      </p>
    </div>
  </div>
  <div class="flex gap-2">
    {% if perms.suppliers.change_supplier %}
      <a href="{% url 'suppliers:supplier_update' supplier.pk %}" class="rounded-lg border px-3 py-2 text-sm">{% trans "Edit" %}</a>
    {% endif %}
    {% if perms.suppliers.delete_supplier %}
      <a href="{% url 'suppliers:supplier_delete' supplier.pk %}" class="rounded-lg border px-3 py-2 text-sm text-red-700">{% trans "Delete" %}</a>
    {% endif %}
  </div>
</header>

<div class="grid md:grid-cols-3 gap-4">
  <div class="rounded-2xl border bg-white p-4">
    <div class="text-sm text-gray-500 mb-1">{% trans "Website" %}</div>
    <div>{% if supplier.website %}<a href="{{ supplier.website }}" target="_blank" class="underline text-blue-700">{{ supplier.website }}</a>{% else %}—{% endif %}</div>
  </div>
  <div class="rounded-2xl border bg-white p-4 md:col-span-2">
    <div class="text-sm text-gray-500 mb-1">{% trans "Address" %}</div>
    <div class="text-sm text-gray-700">{{ supplier.address|linebreaksbr|default:"—" }}</div>
  </div>
</div>

<div class="rounded-2xl border bg-white p-4">
  <h2 class="text-sm text-gray-600 mb-3">{% trans "Products supplied" %}</h2>
  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="bg-gray-50 border-b">
        <tr class="text-left">
          <th class="p-3">{% trans "Product" %}</th><th class="p-3">{% trans "SKU" %}</th><th class="p-3">{% trans "Category" %}</th><th class="p-3">{% trans "On hand" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr class="border-b hover:bg-gray-50">
          <td class="p-3"><a href="{% url 'inventory:product_detail' p.pk %}" class="underline">{{ p.name }}</a></td>
          <td class="p-3">{{ p.sku }}</td>
          <td class="p-3">{{ p.category|default:"—" }}</td>
          <td class="p-3">{{ p.quantity_on_hand }}</td>
        </tr>
        {% empty %}
        <tr><td class="p-6 text-gray-500" colspan="4">{% trans "No products linked yet." %}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
